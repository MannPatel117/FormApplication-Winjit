<div class="container">
    
    <mat-stepper [linear]="true" [orientation]=layout #stepper [formGroup]="registerForm">
      <mat-step [stepControl]="registerForm.get('personalInfo')">
          <ng-template matStepLabel>Personal Details</ng-template>
          <div formGroupName="personalInfo">
            <div class="row mt-4 mb-4">
              <div class="col-lg-6 mb-3 mb-lg-0">
                <div class="d-flex gap-4 align-items-center">
                  <input type="text" id="fname" formControlName="firstName" class="w-75 form-control custom w-lg-100" />
                  <label for="fname" class="form-label text-nowrap change"
                    [class.label-filled]="registerForm.get('personalInfo.firstName').value !== ''">First Name</label>
                </div>
                <div *ngIf="
                registerForm.get('personalInfo.firstName')?.invalid &&
                    (registerForm.get('personalInfo.firstName')?.touched ||
                    registerForm.get('personalInfo.firstName')?.dirty ||
                      !isValid1)
                  " class="row">
                  <div>
                    <p *ngIf="registerForm.get('personalInfo.firstName').hasError('required')" class="text-danger error">
                      Enter Firstname
                    </p>
                    <p *ngIf="
                    registerForm.get('personalInfo.firstName')?.invalid &&
                        !registerForm.get('personalInfo.firstName').hasError('required')
                      " class="text-danger error">
                      Name is invalid
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="d-flex gap-4 align-items-center">
                  <input id="lname" type="text" formControlName="lastName" class="form-control custom w-75" />
                  <label for="lname" class="change form-label text-nowrap"
                    [class.label-filled]="registerForm.get('personalInfo.lastName').value !== ''">Last Name</label>
                </div>
                <div *ngIf="
                registerForm.get('personalInfo.lastName')?.invalid &&
                    (registerForm.get('personalInfo.lastName')?.touched ||
                    registerForm.get('personalInfo.lastName')?.dirty ||
                      !isValid1)
                  " class="row">
                  <div>
                    <p *ngIf="registerForm.get('personalInfo.lastName').hasError('required')" class="text-danger error">
                      Enter Lastname
                    </p>
                    <p *ngIf="
                    registerForm.get('personalInfo.lastName')?.invalid &&
                        !registerForm.get('personalInfo.lastName').hasError('required')
                      " class="text-danger error">
                      Last Name is invalid
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="row mb-4">
              <div class="col-lg-6 mb-3 mb-lg-0">
                <div class="d-flex gap-4 align-items-center">
                  <label class="w-25 form-label text-nowrap">Gender</label>
                  <div class="form-check">
                    <input class="form-check-input" formControlName="gender" value="male" type="radio" name="gender"
                      id="flexRadioDefault1" />
                    <label class="form-check-label" for="flexRadioDefault1">
                      Male
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" formControlName="gender" value="female" type="radio" name="gender"
                      id="flexRadioDefault2" />
                    <label class="form-check-label" for="flexRadioDefault2">
                      Female
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" formControlName="gender" value="other" type="radio" name="gender"
                      id="flexRadioDefault3" />
                    <label class="form-check-label" for="flexRadioDefault3">
                      Other
                    </label>
                  </div>
                </div>
                <div *ngIf="
                registerForm.get('personalInfo.gender').hasError('required') &&
                    (registerForm.get('personalInfo.gender')?.touched || !isValid1)
                  " class="row">
                  <div class="w-75">
                    <p class="text-danger error">Select Gender</p>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="d-flex align-items-center">
                  <label for="dob" class="w-25 form-label text-nowrap">Birth Date</label>
                  <input id="dob" formControlName="date" type="date" placeholder="Birth Date" class="input-group w-50 form-control" />
                </div>
                <div *ngIf="
                registerForm.get('personalInfo.date')?.invalid &&
                    (registerForm.get('personalInfo.date')?.touched ||
                    registerForm.get('personalInfo.date')?.dirty ||
                      !isValid1)
                  " class="row">
                  <div class="w-75">
                    <p *ngIf="registerForm.get('personalInfo.date').hasError('required')" class="text-danger error">
                      Select Date
                    </p>
                    <p *ngIf="registerForm.get('personalInfo.date').hasError('pattern')" class="text-danger error">
                      Format should be yyyy-MM-dd.
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="row mb-4">
              <div class="col-lg-6 mb-3 mb-lg-0">
                <div class="d-flex gap-4 align-items-center">
                  <input id="email" type="email" formControlName="email" class="form-control w-75 custom" />
                  <label for="email" class="w-25 form-label text-nowrap change"
                    [class.label-filled]="registerForm.get('personalInfo.email').value !== ''">Email</label>
                </div>
                <div *ngIf="
                registerForm.get('personalInfo.email')?.invalid &&
                    (registerForm.get('personalInfo.email')?.touched ||
                    registerForm.get('personalInfo.email')?.dirty ||
                      !isValid1)
                  " class="row">
                  <div class="w-75">
                    <p *ngIf="registerForm.get('personalInfo.email').hasError('required')" class="text-danger error">
                      Enter Email
                    </p>
                    <p *ngIf="registerForm.get('personalInfo.email').errors?.['email']" class="text-danger error">
                      Enter Valid Email
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="d-flex gap-4 align-items-center">
                  <input id="phn" type="text" formControlName="phonenumber" maxlength="10" class="form-control w-75 custom" />
                  <label for="phn" [class.label-filled]="registerForm.get('personalInfo.phonenumber').value !== ''"
                    class="change form-label text-nowrap">Phone Number</label>
                </div>
                <div *ngIf="
                registerForm.get('personalInfo.phonenumber')?.invalid &&
                    (registerForm.get('personalInfo.phonenumber')?.touched ||
                    registerForm.get('personalInfo.phonenumber')?.dirty ||
                      !isValid1)
                  " class="row">
                  <div class="w-75">
                    <p *ngIf="registerForm.get('personalInfo.phonenumber').hasError('required')" class="text-danger error">
                      Enter Phone Number
                    </p>
                    <p *ngIf="
                    registerForm.get('personalInfo.phonenumber').errors.minlength ||
                    registerForm.get('personalInfo.phonenumber').errors.maxlength
                      " class="text-danger error">
                      Phone number should be 10 digits
                    </p>
                    <p *ngIf="registerForm.get('personalInfo.phonenumber').errors.pattern" class="text-danger error">
                      Invalid Phone number
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div>
              <button color="primary" mat-raised-button matStepperNext (click)="submit1()">Next</button>
            </div>
          </div>
     
      </mat-step>
      <mat-step [stepControl]="registerForm.get('addressInfo')" label="Address">
          <div formGroupName="addressInfo">
            <div class="row mt-4 mb-4">
              <div class="col-lg-6 mb-3 mb-lg-0">
                <div class="d-flex gap-4 align-items-center">
                  <input id="address1" type="text" formControlName="addressLine1" class="form-control w-75 custom" />
                  <label for="address1" class="form-label text-nowrap change"
                    [class.label-filled]="registerForm.get('addressInfo.addressLine1').value !== ''">Address Line 1</label>
                </div>
                <div *ngIf="
                registerForm.get('addressInfo.addressLine1')?.invalid &&
                    (registerForm.get('addressInfo.addressLine1')?.touched ||
                    registerForm.get('addressInfo.addressLine1')?.dirty ||
                      !isValid2)
                  " class="row">
                  <div class="w-75">
                    <p class="text-danger error">Enter Address Line 1</p>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="d-flex gap-4 align-items-center">
                  <input id="address2" type="text" formControlName="addressLine2" class="form-control w-75 custom" />
                  <label for="address2" class="form-label text-nowrap change"
                    [class.label-filled]="registerForm.get('addressInfo.addressLine2').value !== ''">Address Line 2</label>
                </div>
                <div *ngIf="
                registerForm.get('addressInfo.addressLine2')?.invalid &&
                    (registerForm.get('addressInfo.addressLine2')?.touched ||
                    registerForm.get('addressInfo.addressLine2')?.dirty ||
                      !isValid2)
                  " class="row">
                  <div class="w-75">
                    <p class="text-danger error">Enter Address Line 2</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="row mb-4">
              <div class="col-lg-6 mb-3 mb-lg-0 ">
                <div class="d-flex align-items-center">
                  <label class="w-25 form-label text-nowrap">Country</label>
                  <select id="country" formControlName="country" (change)="changeCountry($event)"
                    class="w-50 btn btn-secondary dropdown-toggle select">
                    <option *ngFor="let count of countryArr" [value]="count">
                      {{ count }}
                    </option>
                  </select>
                </div>
                <div *ngIf="
                registerForm.get('addressInfo.country')?.invalid &&
                    (registerForm.get('addressInfo.country')?.touched ||
                    registerForm.get('addressInfo.country')?.dirty ||
                      !isValid2)
                  " class="row">
                  <div class="w-75">
                    <p class="text-danger error">Select Country</p>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="d-flex align-items-center">
                  <label class="w-25 form-label text-nowrap">State</label>
                  <select formControlName="state" (change)="changeState($event)" class="w-50 btn btn-secondary dropdown-toggle select">
                    <option *ngFor="let stat of stateArr" [value]="stat">
                      {{ stat }}
                    </option>
                  </select>
                </div>
                <div *ngIf="
                registerForm.get('addressInfo.state')?.invalid &&
                    (registerForm.get('addressInfo.state')?.touched ||
                    registerForm.get('addressInfo.state')?.dirty ||
                      !isValid2)
                  " class="row">
                  <div class="w-75">
                    <p class="text-danger error">Select State</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="row mb-4">
              <div class="col-lg-6 mb-3 mb-lg-0">
                <div class="d-flex align-items-center">
                  <label class="w-25 form-label text-nowrap">City</label>
                  <select formControlName="city" class="w-50 btn btn-secondary dropdown-toggle select">
                    <option *ngFor="let city of cityArr" [value]="city">
                      {{ city }}
                    </option>
                  </select>
                </div>
                <div *ngIf="
                registerForm.get('addressInfo.city')?.invalid &&
                    (registerForm.get('addressInfo.city')?.touched ||
                    registerForm.get('addressInfo.city')?.dirty ||
                      !isValid2)
                  " class="row">
                  <div class="w-75">
                    <p class="text-danger error">Select City</p>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="d-flex gap-4 align-items-center">
                  <input type="text" formControlName="pincode" class="form-control w-75 custom" maxlength="6" />
                  <label class="w-25 form-label text-nowrap change"
                    [class.label-filled]="registerForm.get('addressInfo.pincode').value !== ''">Pincode</label>
                </div>
                <div *ngIf="
                registerForm.get('addressInfo.pincode')?.invalid &&
                    (registerForm.get('addressInfo.pincode')?.touched ||
                    registerForm.get('addressInfo.pincode')?.dirty ||
                      !isValid2)
                  " class="row">
                  <div class="w-75">
                    <p *ngIf="registerForm.get('addressInfo.pincode').hasError('required')" class="text-danger error">
                      Enter Pincode
                    </p>
                    <p *ngIf="
                    registerForm.get('addressInfo.pincode').errors.minlength ||
                    registerForm.get('addressInfo.pincode').errors.maxlength
                      " class="text-danger error">
                      Pin Code should by 6 digits
                    </p>
                    <p *ngIf="registerForm.get('addressInfo.pincode').errors.pattern" class="text-danger error">
                      Invalid Pincode
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div>
              <button color="primary" mat-raised-button matStepperNext (click)="submit2()">Next</button>
            </div>
          </div>
      </mat-step>
  
      <mat-step  [stepControl]="registerForm.get('eduExpInfo')" label="Education & Experience Details" >
          <div formGroupName="eduExpInfo">
            <div class="container d-flex gap-3 justify-content-start align-items-center mb-4">
              <h3 class="button-add">Education Details</h3>
              <a class="d-flex justify-content-center align-items-center height-fix fix" (click)="addEducation()">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#5cb85c" class="bi bi-plus-circle-fill"
                  viewBox="0 0 16 16">
                  <path
                    d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z" />
                </svg>
              </a>
            </div>
            <div formArrayName="education">
              <div *ngFor="let edu of educations.controls; let i = index" class="container mb-4">
                <div class="row" [formGroupName]="i">
                  <div class="col-lg-4 mb-4">
                      <div class="d-flex gap-4 align-items-center">
                          <input id="uni" type="text" formControlName="university" class="w-100 form-control custom" />
                          <label for="uni" class="change form-label text-nowrap"
                            [class.label-filled]="edu.get('university').value !== ''">University</label>
                        </div>
                        <div *ngIf="
                            edu.get('university')?.invalid &&
                            (edu.get('university')?.touched ||
                              edu.get('university')?.dirty ||
                              !isValid4)
                          " class="row">
                          <div class="w-75">
                            <p *ngIf="edu.get('university').hasError('required')" class="text-danger error">
                              Enter University Name
                            </p>
                          </div>
                        </div>
                  </div>
                  <div class="col-lg-4 mb-4">
                      <div class="d-flex gap-4 align-items-center">
                          <input id="quali" type="text" formControlName="qualification" class="w-100 form-control custom" />
                          <label for="quali" class="form-label text-nowrap change"
                            [class.label-filled]="edu.get('qualification').value !== ''">Qualification</label>
                        </div>
                        <div *ngIf="
                            edu.get('qualification')?.invalid &&
                            (edu.get('qualification')?.touched ||
                              edu.get('qualification')?.dirty ||
                              !isValid4)
                          " class="row">
                          <div class="w-75">
                            <p *ngIf="edu.get('qualification').hasError('required')" class="text-danger error w-75">
                              Enter Qualification
                            </p>
                          </div>
                        </div>
                  </div>
                  <div class="col-lg-3 mb-4">
                      <div class="d-flex gap-4 align-items-center">
                          <input id="perc" type="text" formControlName="percentage" class="w-100 form-control custom" />
                          <label for="perc" class="form-label text-nowrap change"
                            [class.label-filled]="edu.get('percentage').value !== ''">Percentage</label>
                        </div>
                        <div *ngIf="
                            edu.get('percentage')?.invalid &&
                            (edu.get('percentage')?.touched ||
                              edu.get('percentage')?.dirty ||
                              !isValid4)
                          " class="row">
                          <div class="w-75">
                            <p *ngIf="edu.get('percentage').hasError('required')" class="text-danger error">
                              Enter Percentage
                            </p>
                          </div>
                        </div>
                  </div>
                  <div class="col-lg-1 mb-4 d-flex align-items-center">
                      <a class="d-flex justify-content-center align-items-center gap-2 height-fix2" (click)="remEducation(i)">
                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#DC3545"
                            class="bi bi-x-circle-fill" viewBox="0 0 16 16">
                            <path
                              d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z" />
                          </svg>
                        </a>
                  </div>
                </div>
              </div>
            </div>
  
            <div class="container d-flex gap-3 justify-content-start align-items-center mb-4">
              <h3 class="button-add">Experience Details</h3>
              <a class="d-flex justify-content-center align-items-center height-fix" (click)="addExperience()">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#5cb85c" class="bi bi-plus-circle-fill"
                  viewBox="0 0 16 16">
                  <path
                    d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z" />
                </svg>
              </a>
            </div>
            <div formArrayName="experience">
              <div *ngFor="let exp of experiences.controls; let i = index" class="mb-4">
                <div [formGroupName]="i" class="row">
                  <div class="col-lg-4 mb-4">
                      <div class="d-flex gap-4 align-items-center ">
                          <input id="comp" type="text" formControlName="company" class="w-100 form-control custom" />
                          <label for="comp" class="w-25 form-label text-nowrap change"
                            [class.label-filled]="exp.get('company').value !== ''">Company</label>
                        </div>
                        <div *ngIf="
                            exp.get('company')?.invalid &&
                            (exp.get('company')?.touched ||
                              exp.get('company')?.dirty ||
                              !isValid4)
                          " class="row">
                          <div class="w-75">
                            <p *ngIf="exp.get('company').hasError('required')" class="text-danger error">
                              Enter Company Name
                            </p>
                          </div>
                        </div>
                  </div>
                  <div class="col-lg-4 mb-4">
                      <div class="d-flex gap-4 align-items-center">
                          <input id="position" type="text" formControlName="position" class="form-control custom w-100" />
                          <label for="position" class="form-label text-nowrap change"
                            [class.label-filled]="exp.get('position').value !== ''">Position</label>
                        </div>
                        <div *ngIf="
                            exp.get('position')?.invalid &&
                            (exp.get('position')?.touched ||
                              exp.get('position')?.dirty ||
                              !isValid4)
                          " class="row">
                          <div class="w-75">
                            <p *ngIf="exp.get('position').hasError('required')" class="text-danger error w-75">
                              Enter position
                            </p>
                          </div>
                        </div>
                  </div>
                  <div class="col-lg-3 mb-4">
                      <div class="d-flex gap-4 align-items-center">
                          <input id="year" type="text" formControlName="years" class="form-control w-100 custom" />
                          <label for="year" class="form-label text-nowrap change"
                            [class.label-filled]="exp.get('years').value !== ''">Year</label>
                        </div>
                        <div *ngIf="
                            exp.get('years')?.invalid &&
                            (exp.get('years')?.touched ||
                              exp.get('years')?.dirty ||
                              !isValid4)
                          " class="row">
                          <div class="w-75">
                            <p *ngIf="exp.get('years').hasError('required')" class="text-danger error">
                              Enter Years
                            </p>
                          </div>
                        </div>
                  </div>
                  <div class="col-lg-1 mb-4 d-flex align-items-center">
                      <a class="d-flex justify-content-center align-items-center gap-2 height-fix2" (click)="remExperience(i)">
                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#DC3545"
                            class="bi bi-x-circle-fill" viewBox="0 0 16 16">
                            <path
                              d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z" />
                          </svg>
                        </a>
                  </div>
                </div>
              </div>
            </div>
            <div>
              <button color="primary" mat-raised-button matStepperNext (click)="submit4()">Next</button>
            </div>
          </div>
      </mat-step>
      <mat-step [stepControl]="registerForm.get('otherInfo')">
        <ng-template matStepLabel>Upload Profile Image</ng-template>
            <div *ngIf="selectedImage">
                <img height="120px" width="120px" [src]="selectedImagePreview" alt="Selected Image" />
                <br>
              <br>
            </div>

            <div formGroupName="otherInfo">
              <div class="mt-4 mb-4">
                <label class="form-label" for="customFile">Add Profile Photo</label>
                <input type="file" accept="image/*" formControlName="image" class="form-control custom-height" id="customFile"
                    (change)="onFileSelected($event)" />
                <div *ngIf="
                registerForm.get('otherInfo.image')?.invalid &&
                    (registerForm.get('otherInfo.image')?.touched ||
                    registerForm.get('otherInfo.image')?.dirty ||
                    !isValid6)
                    ">
                    <p *ngIf="registerForm.get('otherInfo.image').hasError('required')" class="text-danger error">
                        Add Image
                    </p>
                 </div>
            </div>
            <div class="mb-4 d-flex gap-2">
                <input class="form-check-input" id="checkbox" formControlName="check" type="checkbox" />
                <label class="form-check-label" for="checkbox"> Accept Terms and Conditions</label>
                <br>
                <div *ngIf="
                registerForm.get('otherInfo.check')?.invalid &&
                    (registerForm.get('otherInfo.check')?.touched ||
                    registerForm.get('otherInfo.check')?.dirty ||
                        !isValid6)
                    ">
                    <p class="text-danger error">Accept Terms and Condition</p>
                </div>
            </div>
            <div>
                <button color="primary" mat-raised-button matStepperNext (click)="submit6()">Next</button>
              </div>
            </div>
  
      </mat-step>
    </mat-stepper>
  </div>
