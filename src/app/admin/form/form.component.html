<div class="container left">
  <div class="row mb-4">
    <h3>Personal Details</h3>
  </div>
  <form [formGroup]="registerForm" (ngSubmit)="submit()">
    <div class="row mb-4">
      <div class="col-lg-6 mb-3 mb-lg-0">
        <div class="d-flex gap-4 align-items-center">
          <input type="text" formControlName="firstName" class="w-75 form-control custom " />
          <label class="form-label text-nowrap change"
            [class.label-filled]="registerForm.get('firstName').value !== ''">First Name</label>
        </div>
        <div *ngIf="
            registerForm.get('firstName')?.invalid &&
            (registerForm.get('firstName')?.touched ||
              registerForm.get('firstName')?.dirty ||
              !isValid)
          " class="row">
          <div>
            <p *ngIf="registerForm.get('firstName').hasError('required')" class="text-danger error">
              Enter Firstname
            </p>
            <p *ngIf="
                registerForm.get('firstName')?.invalid &&
                !registerForm.get('firstName').hasError('required')
              " class="text-danger error">
              Name is invalid
            </p>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="d-flex gap-4 align-items-center">
          <input type="text" formControlName="lastName" class="form-control custom" />
          <label class="change form-label text-nowrap"
            [class.label-filled]="registerForm.get('lastName').value !== ''">Last Name</label>
        </div>
        <div *ngIf="
            registerForm.get('lastName')?.invalid &&
            (registerForm.get('lastName')?.touched ||
              registerForm.get('lastName')?.dirty ||
              !isValid)
          " class="row">
          <div>
            <p *ngIf="registerForm.get('lastName').hasError('required')" class="text-danger error">
              Enter Lastname
            </p>
            <p *ngIf="
                registerForm.get('lastName')?.invalid &&
                !registerForm.get('lastName').hasError('required')
              " class="text-danger error">
              Last Name is invalid
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="row mb-4">
      <div class="col-lg-6 mb-3 mb-lg-0">
        <div class="d-flex gap-4 align-items-center">
          <label class="w-25 form-label text-nowrap">Gender</label>
          <div class="form-check">
            <input class="form-check-input" formControlName="gender" value="male" type="radio" name="gender"
              id="flexRadioDefault1" />
            <label class="form-check-label" for="flexRadioDefault1">
              Male
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" formControlName="gender" value="female" type="radio" name="gender"
              id="flexRadioDefault2" />
            <label class="form-check-label" for="flexRadioDefault2">
              Female
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" formControlName="gender" value="other" type="radio" name="gender"
              id="flexRadioDefault3" />
            <label class="form-check-label" for="flexRadioDefault3">
              Other
            </label>
          </div>
        </div>
        <div *ngIf="
            registerForm.get('gender').hasError('required') &&
            (registerForm.get('gender')?.touched || !isValid)
          " class="row">
          <div class="w-25"></div>
          <div class="w-75">
            <p class="text-danger error">Select Gender</p>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="d-flex align-items-center">
          <label class="w-25 form-label text-nowrap">Birth Date</label>
          <input formControlName="date" type="date" placeholder="Birth Date" class="input-group w-50 form-control" />
        </div>
        <div *ngIf="
            registerForm.get('date')?.invalid &&
            (registerForm.get('date')?.touched ||
              registerForm.get('date')?.dirty ||
              !isValid)
          " class="row">
          <div class="w-25"></div>
          <div class="w-75">
            <p *ngIf="registerForm.get('date').hasError('required')" class="text-danger error">
              Select Date
            </p>
            <p *ngIf="registerForm.get('date').hasError('pattern')" class="text-danger error">
              Format should be yyyy-MM-dd.
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="row mb-4">
      <div class="col-lg-6 mb-3 mb-lg-0">
        <div class="d-flex gap-4 align-items-center">
          <input type="text" formControlName="addressLine1" class="form-control w-75 custom"
           />
          <label class="form-label text-nowrap change" [class.label-filled]="registerForm.get('addressLine1').value !== ''">Address Line 1</label>
         
        </div>
        <div *ngIf="
            registerForm.get('addressLine1')?.invalid &&
            (registerForm.get('addressLine1')?.touched ||
              registerForm.get('addressLine1')?.dirty ||
              !isValid)
          " class="row">

          <div class="w-75">
            <p class="text-danger error">Enter Address Line 1</p>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="d-flex gap-4 align-items-center">
          <input type="text" formControlName="addressLine2" class="form-control w-75 custom"/>
          <label class="form-label text-nowrap change" [class.label-filled]="registerForm.get('addressLine2').value !== ''">Address Line 2</label>
  
        </div>
        <div *ngIf="
            registerForm.get('addressLine2')?.invalid &&
            (registerForm.get('addressLine2')?.touched ||
              registerForm.get('addressLine2')?.dirty ||
              !isValid)
          " class="row">

          <div class="w-75">
            <p class="text-danger error">Enter Address Line 2</p>
          </div>
        </div>
      </div>
    </div>
    <div class="row mb-4">
      <div class="col-lg-6 mb-3 mb-lg-0">
        <div class="d-flex  align-items-center">
          <label class="w-25 form-label text-nowrap">Country</label>
          <select id="country" formControlName="country" (change)="changeCountry($event)"
            class="w-50 btn btn-secondary dropdown-toggle">
            <option *ngFor="let count of countryArr" [value]="count">
              {{ count }}
            </option>
          </select>
        </div>
        <div *ngIf="
            registerForm.controls['country']?.invalid &&
            (registerForm.controls['country']?.touched ||
              registerForm.controls['country']?.dirty ||
              !isValid)
          " class="row">

          <div class="w-75">
            <p class="text-danger error">Select Country</p>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="d-flex align-items-center">
          <label class="w-25 form-label text-nowrap">State</label>
          <select formControlName="state" (change)="changeState($event)" class="w-50 btn btn-secondary dropdown-toggle">
            <option *ngFor="let stat of stateArr" [value]="stat">
              {{ stat }}
            </option>
          </select>
        </div>
        <div *ngIf="
            registerForm.get('state')?.invalid &&
            (registerForm.get('state')?.touched ||
              registerForm.get('state')?.dirty ||
              !isValid)
          " class="row">
  
          <div class="w-75">
            <p class="text-danger error">Select State</p>
          </div>
        </div>
      </div>
    </div>
    <div class="row mb-4">
      <div class="col-lg-6 mb-3 mb-lg-0">
        <div class="d-flex  align-items-center">
          <label class="w-25 form-label text-nowrap">City</label>
          <select formControlName="city" class="w-50 btn btn-secondary dropdown-toggle">
            <option *ngFor="let city of cityArr" [value]="city">
              {{ city }}
            </option>
          </select>
        </div>
        <div *ngIf="
            registerForm.get('city')?.invalid &&
            (registerForm.get('city')?.touched ||
              registerForm.get('city')?.dirty ||
              !isValid)
          " class="row">
      
          <div class="w-75">
            <p class="text-danger error">Select City</p>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="d-flex gap-4 align-items-center">
          <input type="text" formControlName="pincode" class="form-control w-75 custom" maxlength="6" />
          <label class="w-25 form-label text-nowrap change" [class.label-filled]="registerForm.get('pincode').value !== ''">Pincode</label>
      
        </div>
        <div *ngIf="
            registerForm.get('pincode')?.invalid &&
            (registerForm.get('pincode')?.touched ||
              registerForm.get('pincode')?.dirty ||
              !isValid)
          " class="row">

          <div class="w-75">
            <p *ngIf="registerForm.get('pincode').hasError('required')" class="text-danger error">
              Enter Pincode
            </p>
            <p *ngIf="
                registerForm.get('pincode').errors.minlength ||
                registerForm.get('pincode').errors.maxlength
              " class="text-danger error">
              Pin Code should by 6 digits
            </p>
            <p *ngIf="registerForm.get('pincode').errors.pattern" class="text-danger error">
              Invalid Pincode
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="row mb-4">
      <div class="col-lg-6 mb-3 mb-lg-0">
        <div class="d-flex gap-4 align-items-center">
          <input type="email" formControlName="email" class="form-control w-75 custom"  />
          <label class="w-25 form-label text-nowrap change" [class.label-filled]="registerForm.get('email').value !== ''">Email</label>

        </div>
        <div *ngIf="
            registerForm.get('email')?.invalid &&
            (registerForm.get('email')?.touched ||
              registerForm.get('email')?.dirty ||
              !isValid)
          " class="row">
          <div class="w-75">
            <p *ngIf="registerForm.get('email').hasError('required')" class="text-danger error">
              Enter Email
            </p>
            <p *ngIf="registerForm.get('email').errors?.['email']" class="text-danger error">
              Enter Valid Email
            </p>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="d-flex gap-4 align-items-center">
            <input type="text" formControlName="phonenumber" maxlength="10" class="form-control w-75 custom" />
          <label [class.label-filled]="registerForm.get('phonenumber').value !== ''" class="change form-label text-nowrap">Phone Number</label>
  
        </div>
        <div *ngIf="
            registerForm.get('phonenumber')?.invalid &&
            (registerForm.get('phonenumber')?.touched ||
              registerForm.get('phonenumber')?.dirty ||
              !isValid)
          " class="row">

          <div class="w-75">
            <p *ngIf="registerForm.get('phonenumber').hasError('required')" class="text-danger error">
              Enter Phone Number
            </p>
            <p *ngIf="
                registerForm.get('phonenumber').errors.minlength ||
                registerForm.get('phonenumber').errors.maxlength
              " class="text-danger error">
              Phone number should be 10 digits
            </p>
            <p *ngIf="registerForm.get('phonenumber').errors.pattern" class="text-danger error">
              Invalid Phone number
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="container d-flex gap-3 justify-content-start align-items-center mb-4">
      <h3>Education Details</h3>
      <a class="d-flex justify-content-center align-items-center height-fix fix" (click)="addEducation()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#5cb85c" class="bi bi-plus-circle-fill"
          viewBox="0 0 16 16">
          <path
            d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z" />
        </svg>
      </a>
    </div>
    <div class="container" formArrayName="education">
      <div *ngFor="let edu of educations.controls; let i = index" class="mb-4">
        <div [formGroupName]="i">
          <div class="container">
            <div class="row d-flex align-items-start justify-content-center width-input">
              <div class="col-lg-4 mb-2 mb-lg-0">
                <div class="d-flex gap-4 align-items-center">
                  <input type="text" formControlName="university" class="w-75 form-control custom" />
                  <label class="change form-label text-nowrap" [class.label-filled]="edu.get('university').value !== ''">University</label>
               
                </div>
                <div *ngIf="
                    edu.get('university')?.invalid &&
                    (edu.get('university')?.touched ||
                      edu.get('university')?.dirty ||
                      !isValid)
                  " class="row">                 <div class="w-75">
                    <p *ngIf="edu.get('university').hasError('required')" class="text-danger error">
                      Enter University Name
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 mb-2 mb-lg-0">
                <div class="d-flex gap-4 align-items-center">
                  <input type="text" formControlName="qualification" class="form-control custom" />
                  <label class="form-label text-nowrap change" [class.label-filled]="edu.get('qualification').value !== ''">Qualification</label>
            
                </div>
                <div *ngIf="
                    edu.get('qualification')?.invalid &&
                    (edu.get('qualification')?.touched ||
                      edu.get('qualification')?.dirty ||
                      !isValid)
                  " class="row">

                  <div class="w-75">
                    <p *ngIf="edu.get('qualification').hasError('required')" class="text-danger error w-75">
                      Enter Qualification
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 mb-2 mb-lg-0">
                <div class="d-flex gap-4 align-items-center">
                  <input type="text" formControlName="percentage" class="form-control w-75 custom" />
                  <label class="form-label text-nowrap change" [class.label-filled]="edu.get('percentage').value !== ''">Percentage</label>
                
                </div>
                <div *ngIf="
                    edu.get('percentage')?.invalid &&
                    (edu.get('percentage')?.touched ||
                      edu.get('percentage')?.dirty ||
                      !isValid)
                  " class="row">

                  <div class="w-75">
                    <p *ngIf="edu.get('percentage').hasError('required')" class="text-danger error">
                      Enter Percentage
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-lg-1 mb-2 mb-lg-0">
                <a class="d-flex justify-content-center align-items-center gap-2 height-fix2" (click)="remEducation(i)">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#DC3545"
                    class="bi bi-x-circle-fill" viewBox="0 0 16 16">
                    <path
                      d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z" />
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container d-flex gap-3 justify-content-start align-items-center mb-4">
      <h3>Experience Details</h3>
      <a class="d-flex justify-content-center align-items-center height-fix" (click)="addExperience()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#5cb85c" class="bi bi-plus-circle-fill"
          viewBox="0 0 16 16">
          <path
            d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z" />
        </svg>
      </a>
    </div>
    <div class="container" formArrayName="experience">
      <div *ngFor="let exp of experiences.controls; let i = index" class="mb-4">
        <div [formGroupName]="i">
          <div class="container">
            <div class="row d-flex align-items-start justify-content-center width-input">
              <div class="col-lg-4 mb-2 mb-lg-0">
                <div class="d-flex gap-4 align-items-center">
                  <input type="text" formControlName="company" class="w-75 form-control custom"  />
                  <label class="w-25 form-label text-nowrap change" [class.label-filled]="exp.get('company').value !== ''">Company</label>
                
                </div>
                <div *ngIf="
                    exp.get('company')?.invalid &&
                    (exp.get('company')?.touched ||
                      exp.get('company')?.dirty ||
                      !isValid)
                  " class="row">
    
                  <div class="w-75">
                    <p *ngIf="exp.get('company').hasError('required')" class="text-danger error">
                      Enter Company Name
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 mb-2 mb-lg-0">
                <div class="d-flex gap-4 align-items-center">
                  <input type="text" formControlName="position" class="form-control custom"  />
                  <label class="form-label text-nowrap change" [class.label-filled]="exp.get('position').value !== ''">Position</label>
               
                </div>
                <div *ngIf="
                    exp.get('position')?.invalid &&
                    (exp.get('position')?.touched ||
                      exp.get('position')?.dirty ||
                      !isValid)
                  " class="row">

                  <div class="w-75">
                    <p *ngIf="exp.get('position').hasError('required')" class="text-danger error w-75">
                      Enter position
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 mb-2 mb-lg-0">
                <div class="d-flex gap-4 align-items-center">
                  <input type="text" formControlName="years" class="form-control w-75 custom" />
                  <label class="form-label text-nowrap change" [class.label-filled]="exp.get('years').value !== ''">Year</label>

                </div>
                <div *ngIf="
                    exp.get('years')?.invalid &&
                    (exp.get('years')?.touched ||
                      exp.get('years')?.dirty ||
                      !isValid)
                  " class="row">

                  <div class="w-75">
                    <p *ngIf="exp.get('years').hasError('required')" class="text-danger error">
                      Enter Years
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-lg-1 mb-2 mb-lg-0">
                <a class="d-flex justify-content-center align-items-center gap-2 height-fix2"
                  (click)="remExperience(i)">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#DC3545"
                    class="bi bi-x-circle-fill" viewBox="0 0 16 16">
                    <path
                      d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z" />
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <label class="form-label" for="customFile">Add Profile Photo</label>
    <input type="file" accept="image/*" formControlName="image" class="form-control width-input" id="customFile"
      (change)="onFileSelected($event)" />
    <div *ngIf="
        registerForm.get('image')?.invalid &&
        (registerForm.get('image')?.touched ||
          registerForm.get('image')?.dirty ||
          !isValid)
      ">
      <p *ngIf="registerForm.get('image').hasError('required')" class="text-danger error">
        Add Image
      </p>
    </div>
    <div *ngIf="selectedImage">
      <img height="100px" width="100px" [src]="selectedImagePreview" alt="Selected Image" />
    </div>
    <br />
    <div class="form-check">
      <input class="form-check-input" formControlName="check" type="checkbox" />
      <label class="form-check-label"> Accept Terms and Conditions</label>
    </div>
    <div *ngIf="
        registerForm.get('check')?.invalid &&
        (registerForm.get('check')?.touched ||
          registerForm.get('check')?.dirty ||
          !isValid)
      ">
      <p *ngIf="registerForm.get('check').hasError('required')" class="text-danger error">
        Accept Terms and Condition
      </p>
    </div>
    <br />
    <br />
    <button type="button" class="btn btn-success" (click)="submit()">
      Submit
    </button>
  </form>
</div>
